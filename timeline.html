<!DOCTYPE html>
<html>
<head>
	<title>User's Timeline Page</title>
	<script src="jquery.js"></script>
	<script src="data_generator.js"></script>
	<script>
		$(document).ready(function(){
			$('button').click(function(){
				window.history.go(-1);
			});

			//We are going to populate this user's tweets to <ul>
			var $ul = $('ul');
          	
          	//Getting user
          	var url_string = window.location.href;
			var url = new URL(url_string);
			var user = url.searchParams.get("user");
			
			//Update heading with user name
			$('#user').text(user);

			//Getting array of tweets by this user
			var tweetsByUser = streams.users[user];

			//Populated the tweets as <li> elements in our <ul> 
			for(var i = tweetsByUser.length -1; i >= 0; i--){
				var tweet = tweetsByUser[i];
				//initialize with <li> element
				var $tweet = $('<li></li>');
				//Insert tweet as a text
				$tweet.text('@' + tweet.user + ': ' + tweet.message +' | ' +getFormattedDate(tweet.created_at));
				//append this tweet <li> to our <ul>
            	$tweet.appendTo($ul);
			}
		});
		function getFormattedDate(date){
        var year = date.getFullYear();
        var month = (1 + date.getMonth()).toString();
        month = month.length > 1 ? month : '0' + month;

        var day = date.getDate().toString();
        day = day.length > 1 ? day : '0' + day;

        var hour = date.getHours();
        var minute = date.getMinutes();
        var second = date.getSeconds();
  
        return '(' + hour + ' : ' + minute + ' : ' + second + ') '+ month + '/' + day + '/' + year;
      }
	</script>
</head>
<body>
	<h1><span id="user">User</span>'s Timeline Page</h1>
	<button>Back to New Tweets</button>
	<ul></ul>
</body>
</html>
